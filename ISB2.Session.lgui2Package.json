{
    "$schema": "http://www.lavishsoft.com/schema/lgui2Package.json",    
    "includes": [
        "ISB2.Skin.lgui2Package.json",
        "ISB2.Live.lgui2Package.json",
        "ISB2.Viewers.lgui2Package.json"
    ],
    "skin":"ISBoxer 2",
    "templates": {
        "isb2.data":{
            "defaultActionTypes":[
                {
                    "name":"keystroke",
                    "handler":"Action_Keystroke",
                    "retarget":true
                },
                {
                    "name":"game key binding",
                    "handler":"Action_GameKeyBinding",
                    "retarget":true,
                    "variableProperties":["name"]
                },
                {
                    "name":"game macro",
                    "handler":"Action_GameMacro",
                    "retarget":true,
                    "variableProperties":["name","sheet"]
                },
                {
                    "name":"keystring",
                    "handler":"Action_KeyString",
                    "retarget":true,
                    "activationState":true,
                    "variableProperties":["text"]
                },
                {
                    "name":"target group",
                    "handler":"Action_TargetGroup",
                    "retarget":true,
                    "activationState":true,
                    "variableProperties":["name"]
                },
                {
                    "name":"sync cursor",
                    "handler":"Action_SyncCursor",
                    "activationState":true
                },
                {
                    "name":"set game key binding",
                    "handler":"Action_SetGameKeyBinding",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"hotkey sheet state",
                    "handler":"Action_HotkeySheetState",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"vfx sheet state",
                    "handler":"Action_VFXSheetState",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"window focus",
                    "handler":"Action_WindowFocus",
                    "activationState":true,
                    "variableProperties":["window","computer","filterTarget"]
                },
                {
                    "name":"window close",
                    "handler":"Action_WindowClose",
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"mappable",
                    "handler":"Action_Mappable",
                    "variableProperties":["name","sheet"],
                    "retarget":true
                },
                {
                    "name":"input mapping",
                    "handler":"Action_InputMapping",
                    "variableProperties":["name"],
                    "retarget":true
                },
                {
                    "name":"set input mapping",
                    "handler":"Action_SetInputMapping",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"mappable step",
                    "handler":"Action_MappableStep",
                    "variableProperties":["name","sheet"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"mappable step state",
                    "handler":"Action_MappableStepState",
                    "variableProperties":["name","sheet"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"mappable state",
                    "handler":"Action_MappableState",
                    "variableProperties":["name","sheet"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"mappable sheet state",
                    "handler":"Action_MappableSheetState",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"key map state",
                    "handler":"Action_KeyMapState",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"virtualize mappable",
                    "handler":"Action_VirtualizeMappable",
                    "variableProperties":["fromSheet","toSheet","fromName","toName"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"click bar state",
                    "handler":"Action_ClickBarState",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"set click bar button",
                    "handler":"Action_SetClickBarButton",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"add trigger",
                    "handler":"Action_AddTrigger",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"remove trigger",
                    "handler":"Action_RemoveTrigger",
                    "variableProperties":["name"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"broadcast state",
                    "handler":"Action_BroadcastTarget",
                    "variableProperties":["value"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"broadcast target",
                    "handler":"Action_BroadcastTarget",
                    "variableProperties":["value"],
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"broadcast list",
                    "handler":"Action_BroadcastList",
                    "activationState":true,
                    "retarget":true
                },
                {
                    "name":"popup text",
                    "handler":"Action_PopupText",
                    "activationState":true,
                    "retarget":true
                }
            ]
        },
        "isb2.clickbarButton":{
            "type":"button",
            "jsonTemplate":"button",
            "eventHandlers":{
                "gotMouseOver":{
                    "type":"method",
                    "object":"This.Parent.Context",
                    "method":"GotMouseOver"
                },
                "lostMouseOver":{
                    "type":"method",
                    "object":"This.Parent.Context",
                    "method":"LostMouseOver"
                },
                "onMouseButtonMove":{
                    "type":"method",
                    "object":"This.Parent.Context",
                    "method":"OnMouseButtonMove"
                }
            }
        },
        "isb2.clickbar":{
            "type":"window",
            "jsonTemplate":"window",
            "content":{
                "type":"listbox",
                "borderThickness":0,
                "content":{
                    "jsonTemplate": "listbox.content",
                    "orientation":"horizontal"
                },
                "itemsBinding":{
                    "pullFormat":"${This.Context.Data.Get[buttons]}"
                },
                "itemViewGenerators": {
                    "default":{
                        "type":"method",
                        "object":"This.Parent.Context",
                        "method":"GenerateButtonView"
                    }
                }
            }
        },
        "isb2.rotatorStepView":{
            "type":"dockpanel",
            "jsonTemplate":"dockpanel",
            "children":[
                {
                    "type":"objectview",
                    "verticalAlignment":"stretch",
                    "horizontalAlignment":"stretch",
                    "objectBinding":{
                      "pullFormat":"${This.Context}"
                    },
                    "properties":[
                        {
                            "name":"Actions",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.Get[actions]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:Set[actions,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Counter",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[counter]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[counter,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Counter Time",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[counterTime]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[counterTime,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        }
                    ]
                }
            ]
        },
        "isb2.mappableView":{
            "type":"dockpanel",
            "jsonTemplate":"dockpanel",
            "children":[
                {
                    "type":"objectview",
                    "verticalAlignment":"stretch",
                    "horizontalAlignment":"stretch",
                    "properties":[
                        {
                            "name":"Name",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.Get[name]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetString[name,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Steps",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.Get[steps]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:Set[steps,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Counter",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[counter]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[counter,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Counter Time",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[counterTime]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[counterTime,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"First Press",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[firstPress]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[firstPress,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Last Press",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[lastPress]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[lastPress,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Step Time",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[stepTime]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[stepTime,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        },
                        {
                            "name":"Step Triggered",
                            "dataBinding":{
                              "pullFormat":"${This.ObjectView.Context.GetInteger[stepTriggered]}",
                              "pullReplaceNull":"",
                              "pushFormat":["This.ObjectView.Context:SetInteger[stepTriggered,\"","\"]"]
                            },
                            "editTemplate":"propertyview.textbox"                            
                        }
                    ]
                }
            ]
        }
    },
    "elements": [
        {
            "type": "panel",
            "visibility": "hidden",
            "name": "isb2.events"
        },
        {
            "type":"border",
            "visibility":"visible",
            "name":"isb2.popupTextPanel",
            "padding":[20,10],
            "opacity":0.0,
            "acceptsMouseFocus": false,
            "acceptsKeyboardFocus":false,
            "horizontalAlignment":"center",
            "yFactor":0.2,
            "child":{
                "type":"textblock",
                "name":"isb2.popupText",
                "text":"No Popup Text",
                "font":{
                    "heightFactor":2.0
                },
                "color":"#ff0000"                
            },
            "backgroundBrush":{
                "color":"#cc222222"
            },
            "strata":0.6            
        },
        {
            "type":"broadcaster",
            "name":"isb2.MainBroadcaster",
            "broadcastTarget": "all other",
            "horizontalAlignment":"stretch",
            "verticalAlignment":"stretch",
            "strata":0.05,
            "borderBrush":{
                "color":"#ff0000"
            },
            "borderThickness":4,
            "visibility":"hidden",
            "sendKeyboard":true,
            "sendMouse":true,
            "useLocalBindings":true,
            "sendForegroundOnly":true
        },
        {
            "type":"window",
            "name":"isb2.MainWindow",
            "hideOnClose":true,
            "title":"ISBoxer 2",
            "width":750,
            "height":400,
            "minSize":[600,300],
            "horizontalAlignment":"center",
            "verticalAlignment":"center",
            "visibility": "visible",
            "content":{
                "type":"dockpanel",
                "horizontalAlignment": "stretch",
                "verticalAlignment": "stretch",
                "children":[
                    {
                        "type":"dockpanel",
                        "_dock":"bottom",
                        "horizontalAlignment": "stretch",
                        "children":[
                            {
                                "type":"button",
                                "content":"Restart Script",
                                "_dock": "right",
                                "eventHandlers": {
                                    "onPress":{
                                        "type":"code",
                                        "code":"ISB2:Restart"
                                    }
                                }
                            },
                            {
                                "type":"button",
                                "content":"Load Tests",
                                "_dock": "right",
                                "margin":[0,0,5,0],
                                "eventHandlers": {
                                    "onPress":{
                                        "type":"code",
                                        "code":"ISB2:BeginTest"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "type":"tabcontrol",
                        "_dock":"top",
                        "horizontalAlignment":"stretch",
                        "tabs":[
                            {
                                "type":"tab",
                                "header":"Profiles",
                                "content":{
                                    "type":"dockpanel",
                                    "horizontalAlignment": "stretch",
                                    "verticalAlignment": "stretch",
                                    "children":[
                                        {
                                            "type":"button",
                                            "_dock":"bottom",
                                            "horizontalAlignment":"center",
                                            "content":"Activate",
                                            "eventHandlers":{
                                                "onRelease":{
                                                    "type":"code",
                                                    "code":"ISB2:ActivateProfileByName[\"${LGUI2.Element[isb2.listAvailableProfiles].SelectedItem.Data.Get[name]~}\"]"
                                                }
                                            }
                                        },
                                        {
                                            "type":"listbox",
                                            "name":"isb2.listAvailableProfiles",
                                            "_dock":"bottom",
                                            "minSize":[0,80],
                                            "horizontalAlignment":"stretch",
                                            "itemsBinding":{
                                                "pullFormat":"${ISB2.ProfileDB.Profiles.AsJSON[array]}",
                                                "pullHook": {
                                                    "elementName": "isb2.events",
                                                    "flags": "global",
                                                    "event": "onProfilesUpdated"
                                                }
                                            },
                                            "itemViewGenerators":{
                                                "default":{
                                                    "type":"template",
                                                    "template":"isb2.profileView"
                                                }
                                            }
                                        },
                                        {
                                            "type":"textblock",
                                            "_dock":"bottom",
                                            "text":"Available Profiles"
                                        },
                                        {
                                            "type":"textblock",
                                            "_dock":"top",
                                            "text":"Active Profiles"
                                        },
                                        {
                                            "type":"listbox",
                                            "name":"isb2.listActiveProfiles",
                                            "_dock":"top",
                                            "minSize":[0,80],
                                            "horizontalAlignment":"stretch",
                                            "itemsBinding":{
                                                "pullFormat":"${ISB2.Profiles.AsJSON}",
                                                "pullHook": {
                                                    "elementName": "isb2.events",
                                                    "flags": "global",
                                                    "event": "onProfilesUpdated"
                                                }
                                            },
                                            "itemViewGenerators":{
                                                "-default":{
                                                    "type":"template",
                                                    "template":"isb2.profileView"
                                                }
                                            }
                                        },
                                        {
                                            "type":"button",
                                            "_dock":"top",
                                            "horizontalAlignment":"center",
                                            "content":"Deactivate",
                                            "eventHandlers":{
                                                "onRelease":{
                                                    "type":"code",
                                                    "code":"ISB2:DeactivateProfileByName[\"${LGUI2.Element[isb2.listActiveProfiles].SelectedItem.Data~}\"]"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "type":"tab",
                                "header":"Test",
                                "content":{
                                    "type":"dockpanel",
                                    "horizontalAlignment": "stretch",
                                    "verticalAlignment": "stretch",
                                    "children":[
                                        {
                                            "type":"textblock",
                                            "text":"Available Profiles: ${ISB2.ProfileDB.Profiles.Used}",
                                            "_dock":"top"
                                        },
                                        {
                                            "type":"textblock",
                                            "text":"Active Profiles: ${ISB2.Profiles.Used}",
                                            "_dock":"top"
                                        },
                                        {
                                            "type":"textblock",
                                            "text":"Hotkey Sheets: ${ISB2.HotkeySheets.Used}",
                                            "_dock":"top"
                                        },
                                        {
                                            "type":"textblock",
                                            "text":"Mappable Sheets: ${ISB2.MappableSheets.Used}",
                                            "_dock":"top"
                                        },
                                        {
                                            "jsonTemplate":"isb2.mappableView",
                                            "_dock":"top",
                                            "name":"isb2.viewingMappable",
                                            "contextBinding":{
                                                "pullFormat":"${ISB2.LastMappable}"
                                            }
                                        }
                                    ]
                                }                                
                            }                                            
                        ]
                    }
                ]
            }
        }
    ]
}